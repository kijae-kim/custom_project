# 🏙️ 서울시 상권 활력 지수 분석 및 매출 예측

## 📜 프로젝트 개요

본 프로젝트는 서울시 생활인구 데이터와 상권 매출 데이터를 결합하여, 특정 지역의 경제적 활력을 나타내는 **'상권 활력 지수'**를 개발하고 분석하는 것을 목표로 합니다. 또한, 다양한 데이터 분석과 시각화를 통해 상권의 특성을 파악하고, 머신러닝 모델을 활용하여 미래 매출을 예측합니다.

### 주요 분석 질문
1.  생활인구가 많을수록 상권 매출이 높은가?
2.  어떤 시간대와 연령대가 매출에 가장 큰 영향을 미치는가?
3.  '경제 활력 지수'를 통해 서울의 핫존(Hot Zone)과 콜드존(Cold Zone)을 구분할 수 있는가?
4.  데이터 기반의 객관적인 활력 지수 가중치를 산출할 수 있는가?
5.  AI 모델을 통해 상권 매출을 예측할 수 있는가?

---

## 📂 디렉토리 구조

```
/Users/gimgijae/Desktop/YDS/city_project/
├── create_unified_data.py
├── eda_analysis.ipynb
├── city_activate.py
├── random_forest.py
├── map.ipynb
├── seoul_vitality_map.html
├── README.md
└── data/
    ├── geo_code/seoul_hangjeongdong.geojson
    ├── population/생활인구_전처리완료.csv
    └── processed/processed_data.csv
```

---

## 1. 데이터

-   **`processed_data.csv`**: 2020-2024년간의 서울시 상권 매출 데이터. 업종, 시간대, 연령, 성별 등으로 세분화되어 있습니다.
-   **`생활인구_전처리완료.csv`**: 2020-2024년간의 서울시 행정동별 시간대별 생활인구 데이터.
-   **`seoul_hangjeongdong.geojson`**: 서울시 행정동 경계에 대한 지리 정보 데이터. 지도 시각화에 사용됩니다.

---

## 2. 데이터 전처리 및 병합

-   업종별로 나뉘어 있는 `processed_data.csv`를 행정동, 연도, 분기별로 `groupby`하여 집계합니다.
-   생활인구 데이터와 `행정동코드`, `연도`, `분기`를 기준으로 Inner Join하여 분석에 사용할 최종 데이터셋을 생성합니다.

---

## 3. 탐색적 데이터 분석 (EDA) 및 상관관계

-   **생활인구와 매출**: 경제활동인구가 총생활인구보다 매출액과 더 높은 상관관계를 보입니다. 특히, 주간 시간대(11시-17시)의 생활인구가 매출과 가장 큰 연관성을 가집니다.
-   **시계열 분석**: 2020년부터 2024년까지 생활인구는 소폭 감소하는 추세지만, 상권 매출은 꾸준히 증가하여 코로나19 이후 뚜렷한 회복세를 보입니다.
-   **주요 지표**: 1인당 평균 매출, 경제활동인구 1인당 매출 등을 파생 변수로 생성하여 상권의 효율성을 분석합니다.

---

## 4. 경제 활력 지수 분석

상권의 활력을 다각도로 평가하기 위해 4가지 주요 지표를 조합하여 '경제 활력 지수'를 산출합니다.

### 4.1. 지수 정의

| 지표 | 세부 항목 | 목표 | 
| :--- | :--- | :--- |
| **매출 역동성** | 매출 안정성, 주중/주말 균형 | 상권 매출의 변동성이 적고, 주중/주말 고르게 활성화되어 있는가? |
| **소비 효율성** | 1인당 소비액 | 인구 대비 실제 소비 창출 능력이 뛰어난가? |
| **시간 회복력** | 야간 매출 비율, 시간대 분산도 | 24시간 활력이 넘치고, 특정 시간대에만 붐비지 않는가? |
| **경제 다양성** | 연령대/성별 매출 균형 | 특정 계층에 의존하지 않고 다양한 고객을 유치하고 있는가? |

### 4.2. 가중치 산출 방법론

객관적인 가중치를 산출하기 위해 다음 3가지 방법을 사용하고 비교 분석합니다.

1.  **전문가 판단 기반 (초기 모델)**: 각 지표의 중요도를 분석가의 도메인 지식에 따라 `35:25:25:15`로 설정 (`eda_analysis.ipynb`)
2.  **PCA 기반**: 데이터의 내재된 분산을 가장 잘 설명하는 주성분을 추출하여 가중치를 자동 산출 (`PCA.py`)
3.  **RandomForest 기반**: '다음 분기 매출 예측'이라는 목표에 각 지표가 얼마나 중요한지를 측정하여 가중치를 산출 (`random_forest.py`)

---

## 5. 지도 시각화

-   `map.ipynb` 노트북에서 `folium` 라이브러리를 사용하여 행정동별 평균 활력 지수를 단계 구분도(Choropleth Map)로 시각화합니다.
-   외부 URL 의존성을 없애기 위해 로컬에 저장된 `seoul_hangjeongdong.geojson` 파일을 사용합니다.
-   결과물은 `seoul_vitality_map.html` 파일로 저장되어, 웹 브라우저를 통해 인터랙티브한 지도를 확인할 수 있습니다.

---

## 6. 실행 가이드

1.  **PCA 기반 가중치 확인**:
    ```bash
    python city_activate.py
    ```
2.  **RandomForest 기반 가중치 확인**:
    ```bash
    python random_forest.py
    ```
3.  **지도 시각화 생성**:
    - `map.ipynb` Jupyter Notebook을 실행합니다.
    - 실행 완료 후 `seoul_vitality_map.html` 파일이 생성됩니다.